From dc5f5efbc5e196f20fa481f0a32ecdfd1f5317b1 Mon Sep 17 00:00:00 2001
From: Moaath Abusalh <moaath.abusalh@solid-run.com>
Date: Tue, 7 Jun 2022 12:54:28 +0300
Subject: [PATCH] Adding the USB support in the DTS to work with the TI carrier

---
 arch/arm64/boot/dts/ti/am642-solidrun.dts | 3 ++-
 arch/arm64/boot/dts/ti/k3-am64-main.dtsi  | 1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/ti/am642-solidrun.dts b/arch/arm64/boot/dts/ti/am642-solidrun.dts
index da88c5761..4e172d5a0 100644
--- a/arch/arm64/boot/dts/ti/am642-solidrun.dts
+++ b/arch/arm64/boot/dts/ti/am642-solidrun.dts
@@ -593,9 +593,10 @@ &usbss0 {
 };
 
 &usb0 {
-	dr_mode = "otg";
+	dr_mode = "host";
 	maximum-speed = "high-speed";
 	pinctrl-names = "default";
+	status = "okay";
 	pinctrl-0 = <&main_usb0_pins_default>;
 };
 
diff --git a/arch/arm64/boot/dts/ti/k3-am64-main.dtsi b/arch/arm64/boot/dts/ti/k3-am64-main.dtsi
index 6d05fcb56..64267b57c 100644
--- a/arch/arm64/boot/dts/ti/k3-am64-main.dtsi
+++ b/arch/arm64/boot/dts/ti/k3-am64-main.dtsi
@@ -831,6 +831,7 @@ usbss0: cdns-usb@f900000{
 		#address-cells = <2>;
 		#size-cells = <2>;
 		ranges;
+		status = "okay";
 		usb0: usb@f400000{
 			compatible = "cdns,usb3";
 			reg = <0x00 0xf400000 0x00 0x10000>,
-- 
2.25.1

