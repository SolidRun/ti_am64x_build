From d1c140f0f2a09e732c80204833a00b31d0fb9829 Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Wed, 15 May 2024 18:48:15 +0200
Subject: [PATCH 13/14] board: solidrun: am64som: regenerate dram config with
 last ti sysconfig

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 arch/arm/dts/k3-am642-r5-hummingboard-t.dts   |   2 +-
 arch/arm/dts/k3-am642-r5-sr-som.dts           |   2 +-
 ...3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi} | 109 +++++++++---------
 3 files changed, 58 insertions(+), 55 deletions(-)
 rename arch/arm/dts/{k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi => k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi} (97%)

diff --git a/arch/arm/dts/k3-am642-r5-hummingboard-t.dts b/arch/arm/dts/k3-am642-r5-hummingboard-t.dts
index 659377be..0a084d6f 100644
--- a/arch/arm/dts/k3-am642-r5-hummingboard-t.dts
+++ b/arch/arm/dts/k3-am642-r5-hummingboard-t.dts
@@ -10,7 +10,7 @@
 /dts-v1/;
 
 #include "k3-am642.dtsi"
-#include "k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi"
+#include "k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi"
 #include "k3-am64-ddr.dtsi"
 #include "k3-am642-sr-som-binman.dtsi"
 #include "k3-am642-sr-som.dtsi"
diff --git a/arch/arm/dts/k3-am642-r5-sr-som.dts b/arch/arm/dts/k3-am642-r5-sr-som.dts
index 39bcdb3a..6c9e9ba2 100644
--- a/arch/arm/dts/k3-am642-r5-sr-som.dts
+++ b/arch/arm/dts/k3-am642-r5-sr-som.dts
@@ -10,7 +10,7 @@
 /dts-v1/;
 
 #include "k3-am642.dtsi"
-#include "k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi"
+#include "k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi"
 #include "k3-am64-ddr.dtsi"
 #include "k3-am642-sr-som-binman.dtsi"
 #include "k3-am642-sr-som.dtsi"
diff --git a/arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi b/arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi
similarity index 97%
rename from arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi
rename to arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi
index fc996509..b09fd0b7 100644
--- a/arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb.dtsi
+++ b/arch/arm/dts/k3-am642-sr-som-ddr4-1600MTs-8Gb-cl11.dtsi
@@ -1,17 +1,20 @@
 // SPDX-License-Identifier: GPL-2.0+
 /*
  * This file was generated with the
- * AM64x SysConfig DDR Subsystem Register Configuration Tool v0.08.00
- * Mon Oct 04 2021 10:27:51 GMT+0300 (Israel Daylight Time)
+ * AM64x SysConfig DDR Subsystem Register Configuration Tool v0.10.01
+ * Wed May 15 2024 18:46:46 GMT+0200 (Mitteleurop√§ische Sommerzeit)
  * DDR Type: DDR4
  * Frequency = 800MHz (1600MTs)
  * Density: 8Gb
  * Number of Ranks: 1
 */
 
+
 #define DDRSS_PLL_FHS_CNT 6
 #define DDRSS_PLL_FREQUENCY_1 400000000
 #define DDRSS_PLL_FREQUENCY_2 400000000
+#define DDRSS_SDRAM_IDX 14
+
 
 #define DDRSS_CTL_0_DATA 0x00000A00
 #define DDRSS_CTL_1_DATA 0x00000000
@@ -178,7 +181,7 @@
 #define DDRSS_CTL_162_DATA 0x0E0A0907
 #define DDRSS_CTL_163_DATA 0x0A090000
 #define DDRSS_CTL_164_DATA 0x0A090701
-#define DDRSS_CTL_165_DATA 0x0000000E
+#define DDRSS_CTL_165_DATA 0x0000080E
 #define DDRSS_CTL_166_DATA 0x00040003
 #define DDRSS_CTL_167_DATA 0x00000007
 #define DDRSS_CTL_168_DATA 0x00000000
@@ -219,22 +222,22 @@
 #define DDRSS_CTL_203_DATA 0x00000000
 #define DDRSS_CTL_204_DATA 0x00041000
 #define DDRSS_CTL_205_DATA 0x00000301
-#define DDRSS_CTL_206_DATA 0x00000000
+#define DDRSS_CTL_206_DATA 0x000000C0
 #define DDRSS_CTL_207_DATA 0x00000410
 #define DDRSS_CTL_208_DATA 0x00000301
-#define DDRSS_CTL_209_DATA 0x00000000
+#define DDRSS_CTL_209_DATA 0x000000C0
 #define DDRSS_CTL_210_DATA 0x00000410
 #define DDRSS_CTL_211_DATA 0x00000301
-#define DDRSS_CTL_212_DATA 0x00000000
+#define DDRSS_CTL_212_DATA 0x000000C0
 #define DDRSS_CTL_213_DATA 0x00000410
 #define DDRSS_CTL_214_DATA 0x00000301
-#define DDRSS_CTL_215_DATA 0x00000000
+#define DDRSS_CTL_215_DATA 0x000000C0
 #define DDRSS_CTL_216_DATA 0x00000410
 #define DDRSS_CTL_217_DATA 0x00000301
-#define DDRSS_CTL_218_DATA 0x00000000
+#define DDRSS_CTL_218_DATA 0x000000C0
 #define DDRSS_CTL_219_DATA 0x00000410
 #define DDRSS_CTL_220_DATA 0x00000301
-#define DDRSS_CTL_221_DATA 0x00000000
+#define DDRSS_CTL_221_DATA 0x000000C0
 #define DDRSS_CTL_222_DATA 0x00000000
 #define DDRSS_CTL_223_DATA 0x00000000
 #define DDRSS_CTL_224_DATA 0x00000000
@@ -243,18 +246,18 @@
 #define DDRSS_CTL_227_DATA 0x00000000
 #define DDRSS_CTL_228_DATA 0x00000000
 #define DDRSS_CTL_229_DATA 0x00000000
-#define DDRSS_CTL_230_DATA 0x00000000
-#define DDRSS_CTL_231_DATA 0x00000000
-#define DDRSS_CTL_232_DATA 0x00000000
-#define DDRSS_CTL_233_DATA 0x00000000
-#define DDRSS_CTL_234_DATA 0x00000000
-#define DDRSS_CTL_235_DATA 0x00000000
-#define DDRSS_CTL_236_DATA 0x00000401
-#define DDRSS_CTL_237_DATA 0x00000401
-#define DDRSS_CTL_238_DATA 0x00000401
-#define DDRSS_CTL_239_DATA 0x00000401
-#define DDRSS_CTL_240_DATA 0x00000401
-#define DDRSS_CTL_241_DATA 0x00000401
+#define DDRSS_CTL_230_DATA 0x0000000C
+#define DDRSS_CTL_231_DATA 0x0000000C
+#define DDRSS_CTL_232_DATA 0x0000000C
+#define DDRSS_CTL_233_DATA 0x0000000C
+#define DDRSS_CTL_234_DATA 0x0000000C
+#define DDRSS_CTL_235_DATA 0x0000000C
+#define DDRSS_CTL_236_DATA 0x00001401
+#define DDRSS_CTL_237_DATA 0x00001401
+#define DDRSS_CTL_238_DATA 0x00001401
+#define DDRSS_CTL_239_DATA 0x00001401
+#define DDRSS_CTL_240_DATA 0x00001401
+#define DDRSS_CTL_241_DATA 0x00001401
 #define DDRSS_CTL_242_DATA 0x00000493
 #define DDRSS_CTL_243_DATA 0x00000493
 #define DDRSS_CTL_244_DATA 0x00000493
@@ -334,7 +337,7 @@
 #define DDRSS_CTL_318_DATA 0x1FFF0000
 #define DDRSS_CTL_319_DATA 0x000FFF00
 #define DDRSS_CTL_320_DATA 0xFFFFFFFF
-#define DDRSS_CTL_321_DATA 0x000FFF00
+#define DDRSS_CTL_321_DATA 0x00FFFF00
 #define DDRSS_CTL_322_DATA 0x0A000000
 #define DDRSS_CTL_323_DATA 0x0001FFFF
 #define DDRSS_CTL_324_DATA 0x01010101
@@ -343,9 +346,9 @@
 #define DDRSS_CTL_327_DATA 0x00000C01
 #define DDRSS_CTL_328_DATA 0x00000000
 #define DDRSS_CTL_329_DATA 0x00000000
-#define DDRSS_CTL_330_DATA 0x01000000
+#define DDRSS_CTL_330_DATA 0x00000000
 #define DDRSS_CTL_331_DATA 0x01000000
-#define DDRSS_CTL_332_DATA 0x00000000
+#define DDRSS_CTL_332_DATA 0x00000100
 #define DDRSS_CTL_333_DATA 0x00010000
 #define DDRSS_CTL_334_DATA 0x00000000
 #define DDRSS_CTL_335_DATA 0x00000000
@@ -607,10 +610,10 @@
 #define DDRSS_PI_168_DATA 0x00000037
 #define DDRSS_PI_169_DATA 0x00040037
 #define DDRSS_PI_170_DATA 0x04000400
-#define DDRSS_PI_171_DATA 0x68040009
+#define DDRSS_PI_171_DATA 0xC8040009
 #define DDRSS_PI_172_DATA 0x04000916
-#define DDRSS_PI_173_DATA 0x00091668
-#define DDRSS_PI_174_DATA 0x00166804
+#define DDRSS_PI_173_DATA 0x000916C8
+#define DDRSS_PI_174_DATA 0x0016C804
 #define DDRSS_PI_175_DATA 0x00000118
 #define DDRSS_PI_176_DATA 0x00001860
 #define DDRSS_PI_177_DATA 0x00000118
@@ -666,7 +669,7 @@
 #define DDRSS_PI_227_DATA 0x001B0A0A
 #define DDRSS_PI_228_DATA 0x1F0F0050
 #define DDRSS_PI_229_DATA 0x02000001
-#define DDRSS_PI_230_DATA 0x00000A0A
+#define DDRSS_PI_230_DATA 0x00010A0A
 #define DDRSS_PI_231_DATA 0x0C0B0700
 #define DDRSS_PI_232_DATA 0x000D0605
 #define DDRSS_PI_233_DATA 0x0000C570
@@ -735,50 +738,50 @@
 #define DDRSS_PI_296_DATA 0x00000000
 #define DDRSS_PI_297_DATA 0x00000410
 #define DDRSS_PI_298_DATA 0x00000301
-#define DDRSS_PI_299_DATA 0x00000000
+#define DDRSS_PI_299_DATA 0x000000C0
 #define DDRSS_PI_300_DATA 0x00000000
-#define DDRSS_PI_301_DATA 0x00000000
-#define DDRSS_PI_302_DATA 0x00000401
+#define DDRSS_PI_301_DATA 0x0000000C
+#define DDRSS_PI_302_DATA 0x00001401
 #define DDRSS_PI_303_DATA 0x00000493
 #define DDRSS_PI_304_DATA 0x00000000
 #define DDRSS_PI_305_DATA 0x00000410
 #define DDRSS_PI_306_DATA 0x00000301
-#define DDRSS_PI_307_DATA 0x00000000
+#define DDRSS_PI_307_DATA 0x000000C0
 #define DDRSS_PI_308_DATA 0x00000000
-#define DDRSS_PI_309_DATA 0x00000000
-#define DDRSS_PI_310_DATA 0x00000401
+#define DDRSS_PI_309_DATA 0x0000000C
+#define DDRSS_PI_310_DATA 0x00001401
 #define DDRSS_PI_311_DATA 0x00000493
 #define DDRSS_PI_312_DATA 0x00000000
 #define DDRSS_PI_313_DATA 0x00000410
 #define DDRSS_PI_314_DATA 0x00000301
-#define DDRSS_PI_315_DATA 0x00000000
+#define DDRSS_PI_315_DATA 0x000000C0
 #define DDRSS_PI_316_DATA 0x00000000
-#define DDRSS_PI_317_DATA 0x00000000
-#define DDRSS_PI_318_DATA 0x00000401
+#define DDRSS_PI_317_DATA 0x0000000C
+#define DDRSS_PI_318_DATA 0x00001401
 #define DDRSS_PI_319_DATA 0x00000493
 #define DDRSS_PI_320_DATA 0x00000000
 #define DDRSS_PI_321_DATA 0x00000410
 #define DDRSS_PI_322_DATA 0x00000301
-#define DDRSS_PI_323_DATA 0x00000000
+#define DDRSS_PI_323_DATA 0x000000C0
 #define DDRSS_PI_324_DATA 0x00000000
-#define DDRSS_PI_325_DATA 0x00000000
-#define DDRSS_PI_326_DATA 0x00000401
+#define DDRSS_PI_325_DATA 0x0000000C
+#define DDRSS_PI_326_DATA 0x00001401
 #define DDRSS_PI_327_DATA 0x00000493
 #define DDRSS_PI_328_DATA 0x00000000
 #define DDRSS_PI_329_DATA 0x00000410
 #define DDRSS_PI_330_DATA 0x00000301
-#define DDRSS_PI_331_DATA 0x00000000
+#define DDRSS_PI_331_DATA 0x000000C0
 #define DDRSS_PI_332_DATA 0x00000000
-#define DDRSS_PI_333_DATA 0x00000000
-#define DDRSS_PI_334_DATA 0x00000401
+#define DDRSS_PI_333_DATA 0x0000000C
+#define DDRSS_PI_334_DATA 0x00001401
 #define DDRSS_PI_335_DATA 0x00000493
 #define DDRSS_PI_336_DATA 0x00000000
 #define DDRSS_PI_337_DATA 0x00000410
 #define DDRSS_PI_338_DATA 0x00000301
-#define DDRSS_PI_339_DATA 0x00000000
+#define DDRSS_PI_339_DATA 0x000000C0
 #define DDRSS_PI_340_DATA 0x00000000
-#define DDRSS_PI_341_DATA 0x00000000
-#define DDRSS_PI_342_DATA 0x00000401
+#define DDRSS_PI_341_DATA 0x0000000C
+#define DDRSS_PI_342_DATA 0x00001401
 #define DDRSS_PI_343_DATA 0x00000493
 #define DDRSS_PI_344_DATA 0x00000000
 #define DDRSS_PHY_0_DATA 0x04C00000
@@ -873,7 +876,7 @@
 #define DDRSS_PHY_89_DATA 0x31804000
 #define DDRSS_PHY_90_DATA 0x04BF0340
 #define DDRSS_PHY_91_DATA 0x01008080
-#define DDRSS_PHY_92_DATA 0x04050000
+#define DDRSS_PHY_92_DATA 0x04050001
 #define DDRSS_PHY_93_DATA 0x00000504
 #define DDRSS_PHY_94_DATA 0x42100010
 #define DDRSS_PHY_95_DATA 0x010C053E
@@ -901,7 +904,7 @@
 #define DDRSS_PHY_117_DATA 0x00800080
 #define DDRSS_PHY_118_DATA 0x00800080
 #define DDRSS_PHY_119_DATA 0x01000080
-#define DDRSS_PHY_120_DATA 0x01A00000
+#define DDRSS_PHY_120_DATA 0x01000000
 #define DDRSS_PHY_121_DATA 0x00000000
 #define DDRSS_PHY_122_DATA 0x00000000
 #define DDRSS_PHY_123_DATA 0x00080200
@@ -1129,7 +1132,7 @@
 #define DDRSS_PHY_345_DATA 0x31804000
 #define DDRSS_PHY_346_DATA 0x04BF0340
 #define DDRSS_PHY_347_DATA 0x01008080
-#define DDRSS_PHY_348_DATA 0x04050000
+#define DDRSS_PHY_348_DATA 0x04050001
 #define DDRSS_PHY_349_DATA 0x00000504
 #define DDRSS_PHY_350_DATA 0x42100010
 #define DDRSS_PHY_351_DATA 0x010C053E
@@ -1157,7 +1160,7 @@
 #define DDRSS_PHY_373_DATA 0x00800080
 #define DDRSS_PHY_374_DATA 0x00800080
 #define DDRSS_PHY_375_DATA 0x01000080
-#define DDRSS_PHY_376_DATA 0x01A00000
+#define DDRSS_PHY_376_DATA 0x01000000
 #define DDRSS_PHY_377_DATA 0x00000000
 #define DDRSS_PHY_378_DATA 0x00000000
 #define DDRSS_PHY_379_DATA 0x00080200
@@ -2115,7 +2118,7 @@
 #define DDRSS_PHY_1331_DATA 0x00004410
 #define DDRSS_PHY_1332_DATA 0x00000000
 #define DDRSS_PHY_1333_DATA 0x00000046
-#define DDRSS_PHY_1334_DATA 0x00010000
+#define DDRSS_PHY_1334_DATA 0x00000400
 #define DDRSS_PHY_1335_DATA 0x00000008
 #define DDRSS_PHY_1336_DATA 0x00000000
 #define DDRSS_PHY_1337_DATA 0x00000000
@@ -2152,7 +2155,7 @@
 #define DDRSS_PHY_1368_DATA 0x00000002
 #define DDRSS_PHY_1369_DATA 0x00000100
 #define DDRSS_PHY_1370_DATA 0x00000000
-#define DDRSS_PHY_1371_DATA 0x0001F7C0
+#define DDRSS_PHY_1371_DATA 0x0001F7C2
 #define DDRSS_PHY_1372_DATA 0x00020002
 #define DDRSS_PHY_1373_DATA 0x00000000
 #define DDRSS_PHY_1374_DATA 0x00001142
@@ -2186,4 +2189,4 @@
 #define DDRSS_PHY_1402_DATA 0x01990000
 #define DDRSS_PHY_1403_DATA 0x300D3F11
 #define DDRSS_PHY_1404_DATA 0x01990000
-#define DDRSS_PHY_1405_DATA 0x20040001
+#define DDRSS_PHY_1405_DATA 0x20040004
-- 
2.35.3

