From 7472608f8ce83ff24ec81389ba53390dbecca6cc Mon Sep 17 00:00:00 2001
From: Alvaro-Karsz <alvaro.karsz@solid-run.com>
Date: Tue, 16 Nov 2021 14:06:48 +0200
Subject: [PATCH 10/16] Unlock MCU MMR region

---
 arch/arm/mach-k3/am642_init.c                 | 3 +++
 arch/arm/mach-k3/include/mach/am64_hardware.h | 2 ++
 2 files changed, 5 insertions(+)

diff --git a/arch/arm/mach-k3/am642_init.c b/arch/arm/mach-k3/am642_init.c
index ff0a357b9b..4b95e81e00 100644
--- a/arch/arm/mach-k3/am642_init.c
+++ b/arch/arm/mach-k3/am642_init.c
@@ -47,6 +47,9 @@ static void ctrl_mmr_unlock(void)
 	mmr_unlock(MCU_CTRL_MMR0_BASE, 4);
 	mmr_unlock(MCU_CTRL_MMR0_BASE, 6);
 
+	/* Unlock MCU_PADCFG_MMR1 module registers */
+	mmr_unlock(MCU_PADCFG_MMR1_BASE, 1);
+
 	/* Unlock all CTRL_MMR0 module registers */
 	mmr_unlock(CTRL_MMR0_BASE, 0);
 	mmr_unlock(CTRL_MMR0_BASE, 1);
diff --git a/arch/arm/mach-k3/include/mach/am64_hardware.h b/arch/arm/mach-k3/include/mach/am64_hardware.h
index 43cf76bdf4..948d78f914 100644
--- a/arch/arm/mach-k3/include/mach/am64_hardware.h
+++ b/arch/arm/mach-k3/include/mach/am64_hardware.h
@@ -12,6 +12,8 @@
 
 #define PADCFG_MMR1_BASE				0xf0000
 
+#define MCU_PADCFG_MMR1_BASE				0x4080000
+
 #define MAIN_DEVSTAT_PRIMARY_BOOTMODE_MASK		0x00000078
 #define MAIN_DEVSTAT_PRIMARY_BOOTMODE_SHIFT		3
 
-- 
2.35.3

