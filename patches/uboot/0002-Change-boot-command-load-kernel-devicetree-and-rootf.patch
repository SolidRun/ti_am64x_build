From 5ad163c82ced66a5d687d390121847f120764970 Mon Sep 17 00:00:00 2001
From: Alvaro-Karsz <alvaro.karsz@solid-run.com>
Date: Tue, 5 Oct 2021 15:37:02 +0300
Subject: [PATCH] Change boot command, load kernel ,devicetree and rootfs to
 RAM and boot

---
 configs/am64x_a53_solidrun_defconfig | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/configs/am64x_a53_solidrun_defconfig b/configs/am64x_a53_solidrun_defconfig
index 1c9306fd..04792c3d 100644
--- a/configs/am64x_a53_solidrun_defconfig
+++ b/configs/am64x_a53_solidrun_defconfig
@@ -26,7 +26,7 @@ CONFIG_DISTRO_DEFAULTS=y
 # CONFIG_SYS_MALLOC_CLEAR_ON_INIT is not set
 CONFIG_SPL_LOAD_FIT=y
 CONFIG_SPL_LOAD_FIT_ADDRESS=0x81000000
-CONFIG_BOOTCOMMAND="run findfdt; run envboot; run init_${boot}; run get_kern_${boot}; run get_fdt_${boot}; run run_kern"
+CONFIG_BOOTCOMMAND="mmc dev 1;  load mmc 1:1 0x80480000 Image; load mmc 1:1 0x83000000 k3-am642-evm.dtb; load mmc 1:1 0x83800000 rootfs.cpio;  booti 0x80480000 0x83800000 0x83000000;"
 CONFIG_BOARD_LATE_INIT=y
 CONFIG_SPL_SYS_MALLOC_SIMPLE=y
 CONFIG_SPL_STACK_R=y
@@ -175,3 +175,4 @@ CONFIG_USB_FUNCTION_MASS_STORAGE=y
 CONFIG_FS_FAT_MAX_CLUSTSIZE=16384
 CONFIG_OF_LIBFDT_OVERLAY=y
 CONFIG_TI_I2C_BOARD_DETECT=n
+CONFIG_BOOTDELAY=3
-- 
2.25.1

